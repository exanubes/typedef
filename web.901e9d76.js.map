{"mappings":"A,I,E,E,W,E,C,E,E,C,E,E,E,iB,A,O,I,A,C,E,S,C,E,G,K,E,O,C,C,E,C,O,C,G,K,E,C,I,E,C,C,E,A,Q,C,C,E,C,I,E,C,G,E,Q,C,C,E,O,C,C,E,C,E,E,I,C,E,O,C,E,E,O,E,E,O,A,C,I,E,A,M,uB,E,I,O,E,I,C,mB,C,C,E,Q,C,S,C,C,C,E,C,C,E,C,C,E,E,iB,C,G,E,Q,CIEO,IAAM,EAAS,OAAO,MAAM,CAAC,CAChC,MAAO,QACP,KAAM,MACV,GAcO,SAAS,EAAe,CAAK,EAChC,OAAO,IAAU,EAAO,IAAI,CAAG,EAAO,KAAK,CAAG,EAAO,IAAI,AAC7D,CEhBO,MAAM,UAA2B,MAIpC,aAAc,CACV,KAAK,CAAC,uCACV,CACJ,COPO,IAAM,EAAiB,CAC1B,OAAQ,SACR,MAAO,QACP,WAAY,aACZ,IAAK,KACT,EAEa,EAAc,CACvB,KAAM,MACV,CDTO,OAAM,UAA+B,MAKxC,YAAY,CAAM,CAAE,CAEhB,KAAK,CAAC,CAAC,iBAAiB,EADR,OAAO,IAAI,CAAC,GAAgB,IAAI,CAAC,MACf,aAAa,EAAE,EAAO,CAAC,CAAC,CAC9D,CACJ,CAKO,MAAM,UAAkC,MAK3C,YAAY,CAAU,CAAE,CAEpB,KAAK,CAAC,CAAC,iBAAiB,EADV,OAAO,IAAI,CAAC,GAAa,IAAI,CAAC,KACZ,aAAa,EAAE,EAAW,CAAC,CAAC,CAChE,CACJ,CAIO,MAAM,UAAmC,MAK5C,YAAY,CAAU,CAAE,CACpB,KAAK,CAAC,CAAC,0BAA0B,EAAE,EAAA,CAAY,CACnD,CACJ,CAKO,MAAM,UAA+B,MAMxC,YAAY,CAAM,CAAE,CAAK,CAAE,CACvB,KAAK,CAAC,CAAC,QAAQ,EAAE,EAAO,OAAO,CAAC,CAAE,CAAE,MAAA,CAAM,EAC9C,CACJ,CDaA,MAAM,UAAqB,MAMvB,YAAY,CAAG,CAAE,CAAK,CAAE,CACpB,KAAK,CAAC,EAAK,CAAE,MAAA,CAAM,EACvB,CACJ,CGlEO,IAAM,EAA0B,CAKnC,OAAO,CAAI,EACP,IAAM,EAAa,IAAI,SAAS,GAoChC,MAAO,CACH,WAnCmB,KACnB,IAAM,EAAa,EAAW,GAAG,CAAC,cAAc,IAAI,GAEpD,GAAI,CAAC,OAAO,IAAI,CAAC,GAAa,QAAQ,CAAC,GACnC,MAAM,IAAI,EAA0B,GAGxC,OAAO,CACX,EA4BI,MA1Bc,KACd,IAAM,EAAQ,EAAW,GAAG,CAAC,mBAAmB,IAAI,GACpD,GAAI,EAAM,MAAM,CAAG,IACf,MAAM,IAAI,EAA2B,KAGzC,GAAI,CACA,KAAK,KAAK,CAAC,EACf,CAAE,MAAO,EAAO,CACZ,MAAM,IAAI,EAAuB,OAAQ,EAC7C,CAEA,OAAO,CACX,EAcI,OAZe,KACf,IAAM,EAAS,EAAW,GAAG,CAAC,UAAU,IAAI,GAC5C,GAAI,CAAC,OAAO,IAAI,CAAC,GAAgB,QAAQ,CAAC,GACtC,MAAM,IAAI,EAAuB,GAGrC,OAAO,CACX,CAMA,CACJ,CACJ,EMrDO,SAAS,IACZ,IAAM,EAAS,CACX,KAAM,GACN,IAAK,EACT,EAEA,MAAO,CACH,UAAU,CAAI,EAGV,OAFA,EAAO,IAAI,CAAG,EAEP,IAAI,AACf,EACA,aAAa,CAAG,EAGZ,OAFA,EAAO,GAAG,CAAG,EAEN,IAAI,AACf,EACA,MAAA,SAoBqB,MACrB,EACE,EAIA,EAUA,EAEA,QArCE,AAAI,AAAgB,UAAhB,EAAO,IAAI,EAAgB,AAAgB,YAAhB,EAAO,IAAI,CAC/B,CACH,EACA,AAAI,MAAM,CAAC,oDAAoD,EAAE,EAAO,IAAI,CAAA,CAAE,EACjF,CAGD,AAAe,KAAf,EAAO,GAAG,CACH,CAAC,EAAmB,AAAI,MAAM,6CAA6C,CAG/E,EAQU,EARW,EAShC,EAAY,CAAA,EAEhB,CADM,EAAQ,SAAS,aAAa,CAAC,QAC/B,SAAS,CAAG,CAAC,aAAa,EAAE,EAAO,IAAI,CAAA,CAAE,CAC/C,EAAM,YAAY,CAAC,OAAQ,SAErB,EAAO,AAAgB,YAAhB,EAAO,IAAI,CAAiB,IAAwB,IAEjE,EAAM,SAAS,CAAG;AACV,YAAA,EAAE;AAC2B,yCAAA,EAAE,EAAO,GAAG,CAAC;A;AAEtC,gBAAA,EAAE;A;AAEV,QAAA,CAAC,CAEC,EAAe,EAAM,aAAa,CAAC,iBAEnC,EAAe,KACjB,AAAK,GAIL,EAAM,SAAS,CAAC,MAAM,CAAC,kBACvB,EAAM,SAAS,CAAC,GAAG,CAAC,mBACpB,EAAM,gBAAgB,CAClB,eACA,KACI,EAAM,MAAM,GACZ,EAAY,CAAA,CAChB,EACA,CAAE,KAAM,CAAA,CAAK,IAXb,QAAQ,IAAI,CAAC,wCAAyC,EAAO,GAAG,CAaxE,EAEI,GACA,EAAa,gBAAgB,CAAC,QAAS,KACnC,EAAa,YAAY,CAAC,WAAY,QACtC,GACJ,GAGG,CACH,KAAA,IACW,EAEX,MAAA,IACW,EAAM,SAAS,CAE1B,OAAA,IACW,EAEX,MAAO,CACX,GA7D6C,KAAK,CAElD,CACJ,CAgEA,IAAM,EAAsB,IAAM;A;A;A;A;AAK9B,IAAA,CAAC,CAKC,EAAoB,IAAM;A;A;A;A;A;AAM5B,IAAA,CAAC,CAKC,EAAoB,IAAM;A;A;A;A;AAK5B,IAAA,CAAC,CAKC,EAAoB,CACtB,KAAM,IAAM,SAAS,aAAa,CAAC,OACnC,MAAO,IAAM,GACb,UAAW,IAAM,CAAA,EACjB,QAAS,CACb,ECxIM,EAAe,yB,I,E,C,E,EEDkB,sC,E,E,C,E,C,E,E,EAAvC,E,Y,O,C,A,K,GEEA,IAAI,EAAK,ExBeT,SAAS,gBAAgB,CAAC,mBAAoB,SIDT,EFNA,EAAS,EAAQ,EgBFV,EKCO,EbKZ,EIRD,EEFL,EDGO,EKsCjB,MACf,EdtCE,ECGA,ELAF,EkBJE,EAIA,EFgBA,EGrBA,EAIA,EbNA,ERcA,GIF2B,EJIR,2BEVQ,EE8B1B,CACH,KArBS,KACT,GAAI,CACA,IAAM,EAAQ,aAAa,OAAO,CAAC,GACnC,OAAO,ADXR,ACWuB,IDXb,EAAO,KAAK,EAAI,ACWH,IDXa,EAAO,IAAI,CCWf,EAAQ,IAC3C,CAAE,KAAM,CACJ,OAAO,IACX,CACJ,EAeI,KAVS,AAAC,IACV,GAAI,CACA,aAAa,OAAO,CAAC,EAAa,EACtC,CAAE,KAAM,CACJ,IAAI,CACR,CACJ,CAKA,EEnCM,EAAQ,OAAO,UAAU,CAAC,gCJEU,EIgBnC,CACH,QAdY,IACL,EAAM,OAAO,CAAG,AAAA,EAAO,IAAI,CAAG,AAAA,EAAO,KAAK,CAcjD,UARc,AAAC,IACf,EAAM,gBAAgB,CAAC,SAAU,AAAC,IAC9B,EAAQ,EAAM,OAAO,CAAG,AAAA,EAAO,IAAI,CAAG,AAAA,EAAO,KAAK,CACtD,EACJ,CAKA,EClBM,EAAO,SAAS,eAAe,CLDa,EK+B3C,CACH,MA1BU,CAAC,EAAO,KACd,GACA,EAAK,SAAS,CAAC,GAAG,CAAC,oBAGvB,EAAK,YAAY,CAAC,aAAc,GAE5B,GACA,WAAW,IAAM,EAAK,SAAS,CAAC,MAAM,CAAC,oBAAqB,IAEpE,EAiBI,cAZkB,AAAC,IACnB,IAAM,EAAS,SAAS,cAAc,CAAC,gBACvC,GAAI,CAAC,EAAQ,OAEb,IAAM,EAAO,AAAA,EAAe,GAE5B,EAAO,YAAY,CAAC,aAAc,CAAC,UAAU,EAAE,EAAK,MAAM,CAAC,EAC3D,EAAO,YAAY,CAAC,eAAgB,OAAO,IAAU,AAAA,EAAO,IAAI,EACpE,CAKA,ELjCI,EAAgB,GA8Bb,CACH,MA1BU,KACV,EAAgB,EAAQ,IAAI,IAAM,EAAO,OAAO,GAEhD,EAAG,KAAK,CAAC,EAAe,CAAA,GACxB,EAAG,aAAa,CAAC,GAEjB,EAAO,SAAS,CAAC,AAAC,IACT,EAAQ,IAAI,KACb,EAAgB,EAChB,EAAG,KAAK,CAAC,EAAO,CAAA,GAChB,EAAG,aAAa,CAAC,GAEzB,EACJ,EAcI,OATW,KACX,EAAgB,AAAA,EAAe,GAC/B,EAAQ,IAAI,CAAC,GACb,EAAG,KAAK,CAAC,EAAe,CAAA,GACxB,EAAG,aAAa,CAAC,EACrB,CAKA,GFpBM,GoBqBa,EAtCa,GAuC5B,EAAY,SAAS,cAAc,CAAC,MAGpC,AADA,CAAA,EAAY,SAAS,aAAa,CAAC,MAAnC,EACU,EAAE,CAAG,EACf,EAAU,SAAS,CAAG,kBACtB,EAAU,YAAY,CAAC,YAAa,UACpC,EAAU,YAAY,CAAC,cAAe,SACtC,SAAS,IAAI,CAAC,WAAW,CAAC,IA9CxB,EAiDC,EA7CD,EAAgB,IAAI,IFHc,EEOjC,OAAO,MAAM,CAAC,CACjB,IAAI,CAAY,EACZ,IAAM,EAAQ,EAAa,IAAI,GAC/B,EAAU,WAAW,CAAC,GAGjB,EAAM,YAAY,CAEvB,EAAM,SAAS,CAAC,GAAG,CAAC,kBACpB,EAAc,GAAG,CAAC,EACtB,EACA,OAAO,CAAY,EACX,EAAc,GAAG,CAAC,KAClB,EAAa,KAAK,GAClB,EAAc,MAAM,CAAC,GAE7B,EACA,QACI,IAAK,IAAM,KAAgB,EACvB,EAAa,KAAK,GAClB,EAAc,MAAM,CAAC,EAE7B,CACJ,GFKO,CACH,aAlCiB,AAAC,IAElB,GAAM,CAAC,EAAc,EAAM,CAAG,AADd,AAAA,IACsB,SAAS,CAAC,WAAW,YAAY,CAAC,GAAS,KAAK,EAEtF,CAAI,EACA,EAAW,CAAC,6BAA6B,EAAE,EAAM,OAAO,CAAA,CAAE,GAI9D,EAAuB,GAAG,CAAC,GAE3B,WAAW,KACP,EAAuB,MAAM,CAAC,EAClC,EAAG,KACP,EAqBI,UAAA,CAlBE,EAAa,AAAC,IAEhB,GAAM,CAAC,EAAc,EAAM,CAAG,AADd,AAAA,IACsB,SAAS,CAAC,SAAS,YAAY,CAAC,GAAS,KAAK,EAEpF,CAAI,EACA,EAAW,CAAC,6BAA6B,EAAE,EAAM,OAAO,CAAA,CAAE,GAI9D,EAAuB,GAAG,CAAC,GAE3B,WAAW,KACP,EAAuB,MAAM,CAAC,EAClC,EAAG,KACP,EAKI,YAAa,EAAuB,KAAK,AAC7C,GlBnBM,GqBtBA,EAAS,IAAI,OAAA,IAAA,IAAA,GAAgD,CAC/D,KAAM,QACV,GAEM,EAAmB,IAAI,IAE7B,EAAO,gBAAgB,CAAC,UAAW,AAAC,IAChC,IAAM,EAAW,KAAK,KAAK,CAAC,EAAM,IAAI,EAChC,EAAQ,EAAiB,GAAG,CAAC,EAAS,EAAE,EAEzC,IAED,EAAS,KAAK,CACd,EAAM,MAAM,CAAC,EAAS,KAAK,EAE3B,EAAM,OAAO,CAAC,GAEtB,GAEA,EAAO,gBAAgB,CAAC,QAAS,AAAC,IAC9B,IAAK,GAAM,CAAA,OAAE,CAAM,CAAE,GAAI,EAAiB,MAAM,GAC5C,EAAO,GAGX,EAAiB,KAAK,EAC1B,GEtB+C,EFwBxC,CACG,KAAN,MAAW,EAAS,EAAa,GAAK,GAC3B,IAAI,QAAQ,CAAC,EAAS,KACzB,GAAI,EAAiB,GAAG,CAAC,EAAQ,EAAE,EAC/B,MAAM,AAAI,MAAM,CAAC,qBAAqB,EAAE,EAAQ,EAAE,CAAA,CAAE,EAGxD,IAAM,EAAW,WAAW,KACxB,EAAiB,MAAM,CAAC,EAAQ,EAAE,EAClC,EAAO,AAAI,MAAM,eACrB,EAAG,GAEH,EAAiB,GAAG,CAAC,EAAQ,EAAE,CAAE,CAC7B,QAAS,AAAC,IACN,aAAa,GACb,EAAiB,MAAM,CAAC,EAAQ,EAAE,EAClC,EAAQ,EACZ,EACA,OAAQ,AAAC,IACL,aAAa,GACb,EAAiB,MAAM,CAAC,EAAQ,EAAE,EAClC,EAAO,EACX,CACJ,GACA,EAAO,WAAW,CAAC,EACvB,GAEJ,QACI,IAAK,GAAM,CAAA,OAAE,CAAM,CAAE,GAAI,EAAiB,MAAM,GAC5C,EAAO,AAAI,MAAM,uBAGrB,EAAiB,KAAK,GACtB,EAAO,SAAS,EACpB,CACJ,EXtDmC,EaJ5B,CAKH,MAAM,KAAK,CAAO,EACd,GAAI,CACA,IAAM,ECNX,CACH,ODKgD,UCJhD,QAAS,MACT,ODG2D,ECF3D,GAAI,GACR,EDEkB,EAAW,MAAM,EAAO,IAAI,CAAC,GACnC,MAAO,CAAE,OAAQ,KAAM,KAAM,AE2BtC,SAAgC,CAAQ,EDtB3C,GAAI,CAAE,CAAA,YCuBqB,CDvBR,EACf,MAAM,AAAI,MAAM,oCAGpB,GAAI,AAA4B,UAA5B,OAAO,ACmBgB,EDnBP,OAAO,CACvB,MAAM,AAAI,MACN,CAAC,gDAAgD,EAAE,OAAO,ACiBvC,EDjBgD,OAAO,CAAA,CAAE,EAIpF,GAAI,AAAqB,QAArB,ACauB,EDbd,OAAO,CAChB,MAAM,AAAI,MAAM,CAAC,4CAA4C,EAAE,ACYxC,EDZiD,OAAO,CAAA,CAAE,EAGrF,GAAI,AAAuB,UAAvB,OAAO,ACSgB,EDTP,EAAE,CAClB,MAAM,AAAI,MAAM,CAAC,2CAA2C,EAAE,OAAO,ACQ9C,EDRuD,OAAO,CAAA,CAAE,EAG3F,GAAI,ACKuB,EDLd,KAAK,EACV,AAA+B,UAA/B,OAAO,ACIY,EDJH,KAAK,CAAC,IAAI,CAC1B,MAAM,AAAI,MACN,CAAC,mDAAmD,EAAE,OAAO,ACE9C,EDFuD,OAAO,CAAA,CAAE,ECG3F,MAAO,CACH,KAAM,EAAS,MAAM,CAAC,IAAI,CAC1B,OAAQ,EAAS,MAAM,CAAC,MAAM,AAClC,CACJ,EFjCoE,EAAU,CAClE,CAAE,MAAO,EAAO,CACZ,MAAO,CACH,OAAQ,QACR,IAAK,AAAI,MAAM,6BAA8B,CAAE,MAAO,CAAM,EAChE,CACJ,CACJ,CACJ,ETrBkC,EJyC3B,CACH,QA9BY,MAAO,IACnB,GAAI,CACA,IAAM,EAAW,MAAM,EAAgB,IAAI,CAAC,CACxC,WAAY,EAAQ,UAAU,GAC9B,MAAO,EAAQ,KAAK,GACpB,OAAQ,EAAQ,MAAM,EAC1B,GAEA,GAAI,AAAoB,UAApB,EAAS,MAAM,CACf,MAAO,CAAC,CAAE,KAAM,GAAI,OAAQ,EAAG,EAAG,IAAI,EAAa,EAAS,OAAO,EAAE,CAGzE,MAAO,CAAC,EAAS,IAAI,CAAE,KAAK,AAChC,CAAE,MAAO,EAAO,CAQZ,GAAI,AAPe,CACf,EACA,EACA,EACA,EACH,CAEc,IAAI,CAAC,AAAC,GAAc,aAAiB,GAChD,MAAO,CAAC,CAAE,KAAM,GAAI,OAAQ,EAAG,EAAG,EAAM,CAG5C,MAAO,CAAC,CAAE,KAAM,GAAI,OAAQ,EAAG,EAAG,IAAI,EAAa,sBAAuB,GAAO,AACrF,CACJ,CAIA,EIbO,CACH,MA3BU,CAAC,EAAM,KACjB,EAAK,gBAAgB,CAAC,SAAU,MAAO,IACnC,GAAI,CACA,EAAM,cAAc,GAEpB,EAAO,YAAY,CAAC,WAAY,QAEhC,GAAM,CAAC,EAAM,EAAM,CAAG,MAAM,EAAgB,OAAO,CAC/C,AdYZ,EcZ4B,MAAM,CAAC,EAAM,MAAM,GAEvC,GAAI,EAAO,CACP,AdUZ,EcViC,UAAU,CAAC,EAAM,OAAO,EAAI,2BACjD,EAAO,eAAe,CAAC,YACvB,MACJ,CAGA,AADyB,SAAS,cAAc,CAAC,eAChC,SAAS,CAAG,EAAK,IAAI,CACtC,AdGR,EcH6B,YAAY,CAAC,gCAClC,EAAO,eAAe,CAAC,WAC3B,CAAE,MAAO,EAAO,CACZ,AdAR,EcA6B,UAAU,CAAC,EAAM,OAAO,CACjD,CACJ,EACJ,CAIA,GdJM,GgB9BuB,EhB+BR,UAAU,SAAS,Ce5BJ,ECM7B,CACH,KANS,AAAC,GAEH,EAAO,SAAS,CAAC,EAK5B,EDMO,CACH,MAXU,AAAC,IACX,EAAO,gBAAgB,CAAC,QAAS,UAE7B,IAAM,EAAO,AADE,SAAS,cAAc,CAAC,eACnB,SAAS,CAE7B,EAAU,IAAI,CAAC,GACf,AfmBJ,EenBkB,YAAY,CAAC,sBAC/B,EACJ,CAIA,IPnBM,EAAS,SAAS,cAAc,CAAC,kBAGvC,EAAO,gBAAgB,CAAC,QAAS,KAC7B,AR+BwB,EQ/BhB,MAAM,EAClB,GR+BA,EAAa,KAAK,GAElB,EAAiB,KAAK,CAAC,SAAS,cAAc,CAAC,aAE/C,EAAe,KAAK,CAAC,SAAS,aAAa,CAAC,QAAS,SAAS,cAAc,CAAC,iBACjF","sources":["<anon>","src/app.js","src/js/theme/index.js","src/js/theme/service.js","src/js/theme/theme.js","src/js/theme/storage.js","src/js/theme/errors.js","src/js/theme/media.js","src/js/theme/ui.js","src/js/theme/events.js","src/js/codegen/index.js","src/js/codegen/codegen.js","src/js/codegen/errors.js","src/js/codegen/domain.js","src/js/codegen/request.js","src/js/drivers/codegen.js","src/js/drivers/clipboard.js","src/js/clipboard/clipboard.js","src/js/notification/index.js","src/js/notification/service.js","src/js/notification/notification.js","src/js/notification/container.js","src/js/rpc/client.js","node_modules/.pnpm/@parcel+runtime-js@2.16.3_@parcel+core@2.16.3_@swc+helpers@0.5.17_/node_modules/@parcel/runtime-js/lib/runtime-a47112024f7d1271.js","src/js/codegen/command-handler.js","src/js/libs/jsonrpc.js","src/js/codegen/commands.js"],"sourcesContent":["\nfunction $parcel$resolve(url) {\n  url = parcelRequire.i?.[url] || url;\n  return import.meta.resolve($parcel$distDir + url);\n}\n\n      var $parcel$global = globalThis;\n    var $parcel$distDir = \"./\";\n\nvar $parcel$modules = {};\nvar $parcel$inits = {};\n\nvar parcelRequire = $parcel$global[\"parcelRequire0939\"];\n\nif (parcelRequire == null) {\n  parcelRequire = function(id) {\n    if (id in $parcel$modules) {\n      return $parcel$modules[id].exports;\n    }\n    if (id in $parcel$inits) {\n      var init = $parcel$inits[id];\n      delete $parcel$inits[id];\n      var module = {id: id, exports: {}};\n      $parcel$modules[id] = module;\n      init.call(module.exports, module, module.exports);\n      return module.exports;\n    }\n    var err = new Error(\"Cannot find module '\" + id + \"'\");\n    err.code = 'MODULE_NOT_FOUND';\n    throw err;\n  };\n\n  parcelRequire.register = function register(id, init) {\n    $parcel$inits[id] = init;\n  };\n\n  $parcel$global[\"parcelRequire0939\"] = parcelRequire;\n}\n\nvar parcelRegister = parcelRequire.register;\n'use strict';\nconst $276a0e9908831999$export$ce0e5beb5efeb79 = Object.freeze({\n    LIGHT: 'light',\n    DARK: 'dark'\n});\nfunction $276a0e9908831999$export$a1547a14ea8d5a15(value) {\n    return value === $276a0e9908831999$export$ce0e5beb5efeb79.LIGHT || value === $276a0e9908831999$export$ce0e5beb5efeb79.DARK;\n}\nfunction $276a0e9908831999$export$c412900fa5efae76(theme) {\n    return theme === $276a0e9908831999$export$ce0e5beb5efeb79.DARK ? $276a0e9908831999$export$ce0e5beb5efeb79.LIGHT : $276a0e9908831999$export$ce0e5beb5efeb79.DARK;\n} /**\n * @typedef {THEMES[keyof typeof THEMES]} Theme\n * */ \n\n\n'use strict';\nfunction $95ac4d964baa5f8c$export$822342adebd1252b(storage, system, ui) {\n    let current_theme = '';\n    /**\n     *\n     */ const start = ()=>{\n        current_theme = storage.load() || system.current();\n        ui.apply(current_theme, false);\n        ui.update_toggle(current_theme);\n        system.on_change((theme)=>{\n            if (!storage.load()) {\n                current_theme = theme;\n                ui.apply(theme, true);\n                ui.update_toggle(theme);\n            }\n        });\n    };\n    /**\n     *\n     */ const toggle = ()=>{\n        current_theme = (0, $276a0e9908831999$export$c412900fa5efae76)(current_theme);\n        storage.save(current_theme);\n        ui.apply(current_theme, true);\n        ui.update_toggle(current_theme);\n    };\n    return {\n        start: start,\n        toggle: toggle\n    };\n} /**\n * @typedef  {object} ThemeService\n * @property {()=>void} start\n * @property {()=>void} toggle\n * */ \n\n\n'use strict';\nclass $ce8b88ffb7627d74$export$c25a46012a4319a1 extends Error {\n    /**\n     *\n     */ constructor(){\n        super('Failed to save theme to localstorage');\n    }\n}\n\n\n\n'use strict';\nfunction $3d0dc237c3e74aa0$export$796a3c4eda06b041(storage_key) {\n    /**\n     * @returns {Theme | null}\n     */ const load = ()=>{\n        try {\n            const value = localStorage.getItem(storage_key);\n            return (0, $276a0e9908831999$export$a1547a14ea8d5a15)(value) ? value : null;\n        } catch  {\n            return null;\n        }\n    };\n    /**\n     * @param {Theme} theme\n     * */ const save = (theme)=>{\n        try {\n            localStorage.setItem(storage_key, theme);\n        } catch  {\n            new (0, $ce8b88ffb7627d74$export$c25a46012a4319a1)();\n        }\n    };\n    return {\n        load: load,\n        save: save\n    };\n}\n\n\n\n'use strict';\nfunction $79dc158e90b1a798$export$68dd5521f6e5c25b() {\n    const media = window.matchMedia('(prefers-color-scheme: dark)');\n    /**\n     * @type {Current}\n     * */ const current = ()=>{\n        return media.matches ? (0, $276a0e9908831999$export$ce0e5beb5efeb79).DARK : (0, $276a0e9908831999$export$ce0e5beb5efeb79).LIGHT;\n    };\n    /**\n     * @type {OnChange}\n     * */ const on_change = (handler)=>{\n        media.addEventListener('change', (event)=>{\n            handler(event.matches ? (0, $276a0e9908831999$export$ce0e5beb5efeb79).DARK : (0, $276a0e9908831999$export$ce0e5beb5efeb79).LIGHT);\n        });\n    };\n    return {\n        current: current,\n        on_change: on_change\n    };\n} /**\n * @typedef {import(\"./theme\").Theme} Theme\n * @typedef {object} SystemMedia\n * @property {Current} current\n * @property {OnChange} on_change\n * */  /**\n * @callback ThemeChangeHandler\n * @param {Theme} theme\n * @returns {void}\n * */  /**\n * @callback Current\n * @returns {Theme}\n * */  /**\n * @callback OnChange\n * @param {ThemeChangeHandler} handler\n * @returns {void}\n * */ \n\n\n\n'use strict';\nfunction $713114a7b254fb37$export$4a1163a0993c6038() {\n    /**\n     * @type {HTMLElement}\n     * */ const root = document.documentElement;\n    /**\n     * @type {Apply}\n     * */ const apply = (theme, with_transition)=>{\n        if (with_transition) root.classList.add('theme-transition');\n        root.setAttribute('data-theme', theme);\n        if (with_transition) setTimeout(()=>root.classList.remove('theme-transition'), 300);\n    };\n    /**\n     * @type {UpdateToggle}\n     * */ const update_toggle = (theme)=>{\n        const button = document.getElementById('theme-toggle');\n        if (!button) return;\n        const next = (0, $276a0e9908831999$export$c412900fa5efae76)(theme);\n        button.setAttribute('aria-label', `Switch to ${next} theme`);\n        button.setAttribute('aria-pressed', String(theme === (0, $276a0e9908831999$export$ce0e5beb5efeb79).DARK));\n    };\n    return {\n        apply: apply,\n        update_toggle: update_toggle\n    };\n} /**\n * @typedef {import(\"./theme\").Theme} Theme\n * @typedef {object} ThemeUi\n * @property {Apply} apply\n * @property {UpdateToggle} update_toggle\n * */  /**\n * @callback Apply\n * @param {Theme} theme\n * @param {boolean} with_transition\n * @returns {void}\n * */  /**\n * @callback UpdateToggle\n * @param {Theme} theme\n * @returns {void}\n * */ \n\n\n/**\n * @param {import('./service').ThemeService}  service\n * */ function $73de33c38bfa5c3b$export$ff6afb37bf32e20(service) {\n    const button = document.getElementById('theme-toggle');\n    if (!button) return;\n    button.addEventListener('click', ()=>{\n        service.toggle();\n    });\n}\n\n\n\n\n/**\n * @typedef {\"json\"} InputType\n * @typedef {\"golang\" | \"jsdoc\" | \"typescript\" | \"zod\"} Format\n */ const $dd3b75789f9c576d$export$83b3338595758b4b = {\n    golang: 'golang',\n    jsdoc: 'jsdoc',\n    typescript: 'typescript',\n    zod: 'zod'\n};\nconst $dd3b75789f9c576d$export$d1576927a1219cd4 = {\n    json: 'json'\n};\n\n\nclass $c9fb62759d2ea27d$export$827b38dced4a2f9c extends Error {\n    /**\n     *\n     * @param format\n     */ constructor(format){\n        const formats = Object.keys((0, $dd3b75789f9c576d$export$83b3338595758b4b)).join(', ');\n        super(`Expected one of: ${formats}, received: '${format}'`);\n    }\n}\nclass $c9fb62759d2ea27d$export$a999c3277f94f674 extends Error {\n    /**\n     *\n     * @param input_type\n     */ constructor(input_type){\n        const types = Object.keys((0, $dd3b75789f9c576d$export$d1576927a1219cd4)).join('|');\n        super(`Expected one of: ${types}, received: '${input_type}'`);\n    }\n}\nclass $c9fb62759d2ea27d$export$e5ac93839bcdef4d extends Error {\n    /**\n     *\n     * @param max_length\n     */ constructor(max_length){\n        super(`Input value cannot exceed ${max_length}`);\n    }\n}\nclass $c9fb62759d2ea27d$export$88a13612578a6410 extends Error {\n    /**\n     *\n     * @param format\n     * @param cause\n     */ constructor(format, cause){\n        super(`Invalid ${format} syntax`, {\n            cause: cause\n        });\n    }\n}\n\n\n'use strict';\nfunction $6b47dc4a14c725d2$export$7c53127ec179bb42(codegen_handler) {\n    /**\n     * @type {Execute}\n     * */ const execute = async (request)=>{\n        try {\n            const response = await codegen_handler.send({\n                input_type: request.input_type(),\n                input: request.input(),\n                format: request.format()\n            });\n            if (response.status === 'error') return [\n                {\n                    code: '',\n                    format: -1\n                },\n                new $6b47dc4a14c725d2$var$CodegenError(response.message)\n            ];\n            return [\n                response.data,\n                null\n            ];\n        } catch (error) {\n            const exceptions = [\n                (0, $c9fb62759d2ea27d$export$a999c3277f94f674),\n                (0, $c9fb62759d2ea27d$export$827b38dced4a2f9c),\n                (0, $c9fb62759d2ea27d$export$e5ac93839bcdef4d),\n                (0, $c9fb62759d2ea27d$export$88a13612578a6410)\n            ];\n            if (exceptions.some((exception)=>error instanceof exception)) return [\n                {\n                    code: '',\n                    format: -1\n                },\n                error\n            ];\n            return [\n                {\n                    code: '',\n                    format: -1\n                },\n                new $6b47dc4a14c725d2$var$CodegenError('Unhandled exception', error)\n            ];\n        }\n    };\n    return {\n        execute: execute\n    };\n}\n/**\n * @typedef {object} CodegenService\n * @property {Execute} execute\n * */ /**\n * @callback Execute\n * @param {import(\"./request\").CodegenRequest} request\n * @returns {Promise<[import(\"./api\").CodegenResponse, Error]>}\n * @throws {CodegenError}\n * */ /**\n *\n */ class $6b47dc4a14c725d2$var$CodegenError extends Error {\n    /**\n     *\n     * @param msg\n     * @param cause\n     */ constructor(msg, cause){\n        super(msg, {\n            cause: cause\n        });\n    }\n}\n\n\n\n\n'use strict';\nconst $1d9514c02e30a142$export$c2a8ada50e3bcc2a = {\n    /**\n     * @param {HTMLFormElement} form\n     * @returns {CodegenRequest}\n     * */ create (form) {\n        const formValues = new FormData(form);\n        const get_input_type = ()=>{\n            const input_type = formValues.get('input_type').trim();\n            if (!Object.keys((0, $dd3b75789f9c576d$export$d1576927a1219cd4)).includes(input_type)) throw new (0, $c9fb62759d2ea27d$export$a999c3277f94f674)(input_type);\n            return input_type;\n        };\n        const get_input = ()=>{\n            const input = formValues.get('structure-input').trim();\n            if (input.length > 10000) throw new (0, $c9fb62759d2ea27d$export$e5ac93839bcdef4d)(10000);\n            try {\n                JSON.parse(input);\n            } catch (error) {\n                throw new (0, $c9fb62759d2ea27d$export$88a13612578a6410)('json', error);\n            }\n            return input;\n        };\n        const get_format = ()=>{\n            const format = formValues.get('format').trim();\n            if (!Object.keys((0, $dd3b75789f9c576d$export$83b3338595758b4b)).includes(format)) throw new (0, $c9fb62759d2ea27d$export$827b38dced4a2f9c)(format);\n            return format;\n        };\n        return {\n            input_type: get_input_type,\n            input: get_input,\n            format: get_format\n        };\n    }\n}; /**\n * @typedef {object} CodegenRequest\n * @property {InputTypeGetter} input_type\n * @property {InputGetter} input\n * @property {FormatGetter} format\n * */  /**\n * @callback InputTypeGetter\n * @throws {InvalidInputTypeException}\n * @returns {import(\"./domain\").InputType}\n * */  /**\n * @callback InputGetter\n * @returns {string}\n * */  /**\n * @callback FormatGetter\n * @throws {InvalidFormatException}\n * @returns {import(\"./domain\").Format}\n * */ \n\n\n\n\n/**\n * @param {import(\"../codegen/codegen\").CodegenService} codegen_service\n * @param {typeof import(\"../codegen/request\").codegen_request_factory} request_factory\n * @param {import(\"../notification/notification\").NotificationService} notification_service\n * @returns {CodegenDriver}\n * */ function $49f573893d7ba307$export$298688e47c972b7b(codegen_service, request_factory, notification_service) {\n    /**\n     * @type {Start}\n     * */ const start = (form, button)=>{\n        form.addEventListener('submit', async (event)=>{\n            try {\n                event.preventDefault();\n                button.setAttribute('disabled', 'true');\n                const [data, error] = await codegen_service.execute(request_factory.create(event.target));\n                if (error) {\n                    notification_service.show_error(error.message || 'Failed to generate code');\n                    button.removeAttribute('disabled');\n                    return;\n                }\n                const output_container = document.getElementById('output-code');\n                output_container.innerText = data.code;\n                notification_service.show_success('Code generated successfully!');\n                button.removeAttribute('disabled');\n            } catch (error) {\n                notification_service.show_error(error.message);\n            }\n        });\n    };\n    return {\n        start: start\n    };\n} /**\n * @typedef {object} CodegenDriver\n * @property {Start} start\n * */  /**\n * @callback Start\n * @param {HTMLFormElement} form\n * @param {HTMLButtonElement} button\n * @returns { void }\n * */ \n\n\n'use strict';\nfunction $4405b3f923f19046$export$cf62a3466062916d(clipboard, notifications) {\n    /**\n     * @type {Start}\n     * */ const start = (button)=>{\n        button.addEventListener('click', async ()=>{\n            const output = document.getElementById('output-code');\n            const code = output.innerText;\n            clipboard.save(code);\n            notifications.show_success('Saved to clipboard!');\n        });\n    };\n    return {\n        start: start\n    };\n} /**\n * @callback Start\n * @param {HTMLButtonElement} button\n * */  /**\n * @typedef Driver\n * @property {Start} start\n * */ \n\n\n/**\n * @param {ClipboardClient} client\n * @returns {ClipboardService}\n * */ function $2e1600e00eb14e1b$export$984d4661e8ba565f(client) {\n    /**\n     * @type {Save}\n     * */ const save = (text)=>{\n        // TODO:indicate success/failure of the copy to clipboard action in the UI\n        return client.writeText(text);\n    };\n    return {\n        save: save\n    };\n} /**\n * @typedef {object} ClipboardClient\n * @property {(string)=>Promise<void>} writeText\n * */  /**\n * @callback Save\n * @param {string} text\n * @returns {Promise<void>}\n * */  /**\n * @typedef ClipboardService\n * @property {Save} save\n * */ \n\n\n'use strict';\nfunction $1129469dddf70daf$export$d191076365900f13() {\n    const config = {\n        type: '',\n        msg: ''\n    };\n    return {\n        with_type (type) {\n            config.type = type;\n            return this;\n        },\n        with_message (msg) {\n            config.msg = msg;\n            return this;\n        },\n        build () {\n            if (config.type !== 'error' && config.type !== 'success') return [\n                $1129469dddf70daf$var$null_notification,\n                new Error(`Expected type to be \"success\" or \"error\", received: ${config.type}`)\n            ];\n            if (config.msg === '') return [\n                $1129469dddf70daf$var$null_notification,\n                new Error(`Notification cannot have an empty message`)\n            ];\n            return [\n                $1129469dddf70daf$var$create_notification(config),\n                null\n            ];\n        }\n    };\n}\n/**\n * @param {{msg: string; type: string}} config\n * */ function $1129469dddf70daf$var$create_notification(config) {\n    let is_active = true;\n    const toast = document.createElement('div');\n    toast.className = `toast toast--${config.type}`;\n    toast.setAttribute('role', 'alert');\n    const icon = config.type === 'success' ? $1129469dddf70daf$var$create_success_icon() : $1129469dddf70daf$var$create_error_icon();\n    toast.innerHTML = `\n            ${icon}\n            <span class=\"toast__message\">${config.msg}</span>\n            <button class=\"toast__close\" aria-label=\"Close notification\">\n                ${$1129469dddf70daf$var$create_close_icon()}\n            </button>\n        `;\n    const close_button = toast.querySelector('.toast__close');\n    const handle_close = ()=>{\n        if (!is_active) {\n            console.warn(\"Notification is already closed!: '%s'\", config.msg);\n            return;\n        }\n        toast.classList.remove('toast--visible');\n        toast.classList.add('toast--removing');\n        toast.addEventListener('animationend', ()=>{\n            toast.remove();\n            is_active = false;\n        }, {\n            once: true\n        });\n    };\n    if (close_button) close_button.addEventListener('click', ()=>{\n        close_button.setAttribute('disabled', 'true');\n        handle_close();\n    });\n    return {\n        html () {\n            return toast;\n        },\n        value () {\n            return toast.innerHTML;\n        },\n        active () {\n            return is_active;\n        },\n        close: handle_close\n    };\n}\n/**\n * @returns {string}\n */ const $1129469dddf70daf$var$create_success_icon = ()=>`\n        <svg class=\"toast__icon\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" aria-hidden=\"true\">\n            <path d=\"M22 11.08V12a10 10 0 1 1-5.93-9.14\"></path>\n            <polyline points=\"22 4 12 14.01 9 11.01\"></polyline>\n        </svg>\n    `;\n/**\n * @returns {string}\n */ const $1129469dddf70daf$var$create_error_icon = ()=>`\n        <svg class=\"toast__icon\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" aria-hidden=\"true\">\n            <circle cx=\"12\" cy=\"12\" r=\"10\"></circle>\n            <line x1=\"15\" y1=\"9\" x2=\"9\" y2=\"15\"></line>\n            <line x1=\"9\" y1=\"9\" x2=\"15\" y2=\"15\"></line>\n        </svg>\n    `;\n/**\n * @returns {string}\n */ const $1129469dddf70daf$var$create_close_icon = ()=>`\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" aria-hidden=\"true\">\n            <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\"></line>\n            <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\"></line>\n        </svg>\n    `;\n/**\n * @type {Notification}\n * */ const $1129469dddf70daf$var$null_notification = {\n    html: ()=>document.createElement('div'),\n    value: ()=>'',\n    is_active: ()=>false,\n    close () {}\n}; /**\n * @typedef {object} Notification\n * @property {()=>HTMLElement} html\n * @property {()=>string} value\n * @property {()=>boolean} active\n * @property {()=>void} close\n * */  /**\n * @typedef {object} NotificationBuilder\n * @property {(type: \"error\" | \"success\")=>NotificationBuilder} with_type\n * @property {(msg: string)=>NotificationBuilder} with_message\n * @property {()=>[ Notification, Error ]} build\n * */ \n\n\n'use strict';\nfunction $7fef65acc7464686$export$db017b47ad6f381d(notification_container) {\n    /** @type {NotificationService[\"show_success\"]} */ const show_success = (message)=>{\n        const builder = (0, $1129469dddf70daf$export$d191076365900f13)();\n        const [notification, error] = builder.with_type('success').with_message(message).build();\n        if (error) {\n            show_error(`Error creating notification: ${error.message}`);\n            return;\n        }\n        notification_container.add(notification);\n        setTimeout(()=>{\n            notification_container.remove(notification);\n        }, 10000);\n    };\n    /** @type {NotificationService[\"show_error\"]} */ const show_error = (message)=>{\n        const builder = (0, $1129469dddf70daf$export$d191076365900f13)();\n        const [notification, error] = builder.with_type('error').with_message(message).build();\n        if (error) {\n            show_error(`Error creating notification: ${error.message}`);\n            return;\n        }\n        notification_container.add(notification);\n        setTimeout(()=>{\n            notification_container.remove(notification);\n        }, 10000);\n    };\n    return {\n        show_success: show_success,\n        show_error: show_error,\n        dismiss_all: notification_container.clear\n    };\n} /**\n * @typedef {object} NotificationService\n * @property {(msg: string)=>void} show_success\n * @property {(msg: string)=>void} show_error\n * @property {()=>void} dismiss_all\n */ \n\n\n'use strict';\nconst $72c6dc9f38f618f7$var$CONTAINER_ID = 'notification-container';\nfunction $72c6dc9f38f618f7$export$71d95e9ca5ea1282() {\n    const container = $72c6dc9f38f618f7$var$get_container($72c6dc9f38f618f7$var$CONTAINER_ID);\n    /**\n     * @type {Set<import(\"./notification\").Notification>}\n     * */ const notifications = new Set();\n    // TODO: Display a \"clear\" button when 3 or more notifications are in the container\n    return Object.freeze({\n        add (notification) {\n            const toast = notification.html();\n            container.appendChild(toast);\n            // Trigger reflow to ensure animation plays\n            toast.offsetHeight;\n            toast.classList.add('toast--visible');\n            notifications.add(notification);\n        },\n        remove (notification) {\n            if (notifications.has(notification)) {\n                notification.close();\n                notifications.delete(notification);\n            }\n        },\n        clear () {\n            for (const notification of notifications){\n                notification.close();\n                notifications.delete(notification);\n            }\n        }\n    });\n}\n/**\n * @param id\n * @returns {HTMLElement}\n */ const $72c6dc9f38f618f7$var$get_container = (id)=>{\n    let container = document.getElementById(id);\n    if (!container) {\n        container = document.createElement('div');\n        container.id = $72c6dc9f38f618f7$var$CONTAINER_ID;\n        container.className = 'toast-container';\n        container.setAttribute('aria-live', 'polite');\n        container.setAttribute('aria-atomic', 'false');\n        document.body.appendChild(container);\n    }\n    return container;\n}; /**\n * @typedef {object} NotificationContainer\n * @property {(notification: import(\"./notification\").Notification)=>void} add\n * @property {(notification: import(\"./notification\").Notification)=>void} remove\n * @property {()=>void} clear\n * */ \n\n\n\n\n'use strict';\nvar $be55ea0812813c86$exports = {};\n$be55ea0812813c86$exports = $parcel$resolve(\"worker.41b28b9f.js\");\n\n\nfunction $2bea1b4cfe11ed0f$export$2b32509f061e853() {\n    const worker = new Worker(new URL($be55ea0812813c86$exports), {\n        type: 'module'\n    });\n    const pending_requests = new Map();\n    worker.addEventListener('message', (event)=>{\n        const response = JSON.parse(event.data);\n        const entry = pending_requests.get(response.id);\n        if (!entry) return;\n        if (response.error) entry.reject(response.error);\n        else entry.resolve(response);\n    });\n    worker.addEventListener('error', (error)=>{\n        for (const { reject: reject } of pending_requests.values())reject(error);\n        pending_requests.clear();\n    });\n    return {\n        async send (request, timeout_ms = 5000) {\n            return new Promise((resolve, reject)=>{\n                if (pending_requests.has(request.id)) throw new Error(`Duplicate request id ${request.id}`);\n                const timer_id = setTimeout(()=>{\n                    pending_requests.delete(request.id);\n                    reject(new Error('RPC timeout'));\n                }, timeout_ms);\n                pending_requests.set(request.id, {\n                    resolve: (value)=>{\n                        clearTimeout(timer_id);\n                        pending_requests.delete(request.id);\n                        resolve(value);\n                    },\n                    reject: (error)=>{\n                        clearTimeout(timer_id);\n                        pending_requests.delete(request.id);\n                        reject(error);\n                    }\n                });\n                worker.postMessage(request);\n            });\n        },\n        close () {\n            for (const { reject: reject } of pending_requests.values())reject(new Error('Worker terminated.'));\n            pending_requests.clear();\n            worker.terminate();\n        }\n    };\n} /**\n * @typedef {object} RpcClient\n * @property {SendRPCCommand} send\n * @property {()=>void} close\n * */  /**\n * @callback SendRPCCommand\n * @param {import(\"../libs/jsonrpc\").JSONRPCRequest<unknown>} request\n * @returns {Promise<import(\"../libs/jsonrpc\").JSONRPCResponse<unknown>>}\n * */ \n\n\n'use strict';\nlet $38b6621d7d721506$var$id = 1;\nfunction $38b6621d7d721506$export$5bc64a5e6140bad4(method, body) {\n    return {\n        method: method,\n        jsonrpc: '2.0',\n        params: body,\n        id: $38b6621d7d721506$var$id++\n    };\n}\nfunction $38b6621d7d721506$export$fe2df03055dfd46(response) {\n    if (!('jsonrpc' in response)) throw new Error('Missing required param \"jsonrpc\"');\n    if (typeof response.jsonrpc !== 'string') throw new Error(`Invalid jsonrpc type. Expected string, received ${typeof response.jsonrpc}`);\n    if (response.jsonrpc !== '2.0') throw new Error(`Invalid rpc version. Expected 2.0, received ${response.jsonrpc}`);\n    if (typeof response.id !== 'number') throw new Error(`Invalid id type. Expected number, received ${typeof response.jsonrpc}`);\n    if (response.error) {\n        if (typeof response.error.code !== 'number') throw new Error(`Invalid error code type. Expected number, received ${typeof response.jsonrpc}`);\n    }\n} /**\n * @template T\n * @typedef {object} JSONRPCRequest\n * @property {\"2.0\"} jsonrpc\n * @property {string} method\n * @property {T} params\n * @property {number} id\n * */  /**\n * @template T\n * @typedef {object} JSONRPCResponse\n * @property {\"2.0\"} jsonrpc\n * @property {T}  [result]\n * @property {number} [id]\n * @property {JSONRPCError} [error]\n * */  /**\n * @typedef {object} JSONRPCError\n * @property {number} code\n * @property {string} [message]\n * @property {object} [data]\n * */ \n\n\n\n'use strict';\nfunction $b2db6037a212ec86$export$c7fd7ec33ea4fd97(response) {\n    (0, $38b6621d7d721506$export$fe2df03055dfd46)(response);\n    return {\n        code: response.result.code,\n        format: response.result.format\n    };\n}\n\n\n'use strict';\nfunction $bcbff1d7d964369b$export$c22f43210d32520d(client) {\n    return {\n        /**\n         *\n         * @param command\n         */ async send (command) {\n            try {\n                const request = (0, $38b6621d7d721506$export$5bc64a5e6140bad4)('codegen', command);\n                const response = await client.send(request);\n                return {\n                    status: 'ok',\n                    data: (0, $b2db6037a212ec86$export$c7fd7ec33ea4fd97)(response)\n                };\n            } catch (error) {\n                return {\n                    status: 'error',\n                    err: new Error('Error while making request', {\n                        cause: error\n                    })\n                };\n            }\n        }\n    };\n}\n\n\n'use strict';\ndocument.addEventListener('DOMContentLoaded', ()=>{\n    const theme_driver = (0, $95ac4d964baa5f8c$export$822342adebd1252b)(// TODO: refactor to fit the driver convention\n    (0, $3d0dc237c3e74aa0$export$796a3c4eda06b041)('typedef-theme-preference'), (0, $79dc158e90b1a798$export$68dd5521f6e5c25b)(), (0, $713114a7b254fb37$export$4a1163a0993c6038)());\n    const notification_service = (0, $7fef65acc7464686$export$db017b47ad6f381d)((0, $72c6dc9f38f618f7$export$71d95e9ca5ea1282)());\n    const rpc_client = (0, $2bea1b4cfe11ed0f$export$2b32509f061e853)();\n    const codegen_handler = (0, $bcbff1d7d964369b$export$c22f43210d32520d)(rpc_client);\n    const codegen_driver = (0, $49f573893d7ba307$export$298688e47c972b7b)((0, $6b47dc4a14c725d2$export$7c53127ec179bb42)(codegen_handler), (0, $1d9514c02e30a142$export$c2a8ada50e3bcc2a), notification_service);\n    const clipboard_driver = (0, $4405b3f923f19046$export$cf62a3466062916d)((0, $2e1600e00eb14e1b$export$984d4661e8ba565f)(navigator.clipboard), notification_service);\n    (0, $73de33c38bfa5c3b$export$ff6afb37bf32e20)(theme_driver);\n    theme_driver.start();\n    clipboard_driver.start(document.getElementById('copy-btn'));\n    codegen_driver.start(document.querySelector('form'), document.getElementById('transform-btn'));\n});\n\n\n//# sourceMappingURL=web.901e9d76.js.map\n","'use strict';\n\nimport {\n    create_system_media,\n    create_theme_service,\n    create_theme_storage,\n    create_theme_ui,\n    register_theme_toggle_event,\n} from './js/theme';\nimport { create_codegen_service, codegen_request_factory } from './js/codegen';\nimport { create_codegen_driver } from './js/drivers/codegen';\nimport { create_clipboard_driver } from './js/drivers/clipboard';\nimport { create_clipboard } from './js/clipboard/clipboard';\nimport { create_notification_container, create_notification_service } from './js/notification';\nimport { create_rpc_client } from './js/rpc/client';\nimport { create_rpc_codegen_command_handler } from './js/codegen/command-handler';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n    const theme_driver = create_theme_service(\n        // TODO: refactor to fit the driver convention\n        create_theme_storage('typedef-theme-preference'),\n        create_system_media(),\n        create_theme_ui()\n    );\n    const notification_service = create_notification_service(create_notification_container());\n    const rpc_client = create_rpc_client();\n    const codegen_handler = create_rpc_codegen_command_handler(rpc_client);\n\n    const codegen_driver = create_codegen_driver(\n        create_codegen_service(codegen_handler),\n        codegen_request_factory,\n        notification_service\n    );\n\n    const clipboard_driver = create_clipboard_driver(\n        create_clipboard(navigator.clipboard),\n        notification_service\n    );\n\n    register_theme_toggle_event(theme_driver);\n    theme_driver.start();\n\n    clipboard_driver.start(document.getElementById('copy-btn'));\n\n    codegen_driver.start(document.querySelector('form'), document.getElementById('transform-btn'));\n});\n","export { create_theme_service } from './service';\nexport { create_theme_storage } from './storage';\nexport { create_system_media } from './media';\nexport { create_theme_ui } from './ui';\nexport { register_theme_toggle_event } from './events';\n","'use strict';\n\nimport { opposite_theme } from './theme';\n\n/**\n * @param {import('./storage').ThemeStorage} storage\n * @param {import('./media').SystemMedia} system\n * @param {import('./ui').ThemeUi} ui\n * @returns {ThemeService}\n * */\nexport function create_theme_service(storage, system, ui) {\n    let current_theme = '';\n\n    /**\n     *\n     */\n    const start = () => {\n        current_theme = storage.load() || system.current();\n\n        ui.apply(current_theme, false);\n        ui.update_toggle(current_theme);\n\n        system.on_change((theme) => {\n            if (!storage.load()) {\n                current_theme = theme;\n                ui.apply(theme, true);\n                ui.update_toggle(theme);\n            }\n        });\n    };\n\n    /**\n     *\n     */\n    const toggle = () => {\n        current_theme = opposite_theme(current_theme);\n        storage.save(current_theme);\n        ui.apply(current_theme, true);\n        ui.update_toggle(current_theme);\n    };\n\n    return {\n        start,\n        toggle,\n    };\n}\n\n/**\n * @typedef  {object} ThemeService\n * @property {()=>void} start\n * @property {()=>void} toggle\n * */\n","'use strict';\n\nexport const THEMES = Object.freeze({\n    LIGHT: 'light',\n    DARK: 'dark',\n});\n\n/**\n * @param value\n * @returns {boolean}\n * */\nexport function is_valid_theme(value) {\n    return value === THEMES.LIGHT || value === THEMES.DARK;\n}\n\n/**\n * @param theme\n * @returns {THEMES[keyof typeof THEMES]}\n * */\nexport function opposite_theme(theme) {\n    return theme === THEMES.DARK ? THEMES.LIGHT : THEMES.DARK;\n}\n\n/**\n * @typedef {THEMES[keyof typeof THEMES]} Theme\n * */\n","'use strict';\n\nimport { ThemeSaveException } from './errors';\nimport { is_valid_theme } from './theme';\n\n/**\n * @typedef {import(\"./theme\").Theme} Theme\n * @typedef {object} ThemeStorage\n * @property {()=>Theme | null} load\n * @property {(theme: Theme)=>void} save\n * */\n\n/**\n * @param {string} storage_key\n * @returns {ThemeStorage}\n * */\nexport function create_theme_storage(storage_key) {\n    /**\n     * @returns {Theme | null}\n     */\n    const load = () => {\n        try {\n            const value = localStorage.getItem(storage_key);\n            return is_valid_theme(value) ? value : null;\n        } catch {\n            return null;\n        }\n    };\n\n    /**\n     * @param {Theme} theme\n     * */\n    const save = (theme) => {\n        try {\n            localStorage.setItem(storage_key, theme);\n        } catch {\n            new ThemeSaveException();\n        }\n    };\n\n    return {\n        load,\n        save,\n    };\n}\n","'use strict';\n\n/**\n *\n */\nexport class ThemeSaveException extends Error {\n    /**\n     *\n     */\n    constructor() {\n        super('Failed to save theme to localstorage');\n    }\n}\n","'use strict';\n\nimport { THEMES } from './theme';\n\n/**\n * @returns {SystemMedia}\n * */\nexport function create_system_media() {\n    const media = window.matchMedia('(prefers-color-scheme: dark)');\n\n    /**\n     * @type {Current}\n     * */\n    const current = () => {\n        return media.matches ? THEMES.DARK : THEMES.LIGHT;\n    };\n\n    /**\n     * @type {OnChange}\n     * */\n    const on_change = (handler) => {\n        media.addEventListener('change', (event) => {\n            handler(event.matches ? THEMES.DARK : THEMES.LIGHT);\n        });\n    };\n\n    return {\n        current,\n        on_change,\n    };\n}\n\n/**\n * @typedef {import(\"./theme\").Theme} Theme\n * @typedef {object} SystemMedia\n * @property {Current} current\n * @property {OnChange} on_change\n * */\n\n/**\n * @callback ThemeChangeHandler\n * @param {Theme} theme\n * @returns {void}\n * */\n\n/**\n * @callback Current\n * @returns {Theme}\n * */\n\n/**\n * @callback OnChange\n * @param {ThemeChangeHandler} handler\n * @returns {void}\n * */\n","'use strict';\n\nimport { THEMES, opposite_theme } from './theme';\n\n/**\n * @returns {ThemeUi}\n * */\nexport function create_theme_ui() {\n    /**\n     * @type {HTMLElement}\n     * */\n    const root = document.documentElement;\n\n    /**\n     * @type {Apply}\n     * */\n    const apply = (theme, with_transition) => {\n        if (with_transition) {\n            root.classList.add('theme-transition');\n        }\n\n        root.setAttribute('data-theme', theme);\n\n        if (with_transition) {\n            setTimeout(() => root.classList.remove('theme-transition'), 300);\n        }\n    };\n\n    /**\n     * @type {UpdateToggle}\n     * */\n    const update_toggle = (theme) => {\n        const button = document.getElementById('theme-toggle');\n        if (!button) return;\n\n        const next = opposite_theme(theme);\n\n        button.setAttribute('aria-label', `Switch to ${next} theme`);\n        button.setAttribute('aria-pressed', String(theme === THEMES.DARK));\n    };\n\n    return {\n        apply,\n        update_toggle,\n    };\n}\n\n/**\n * @typedef {import(\"./theme\").Theme} Theme\n * @typedef {object} ThemeUi\n * @property {Apply} apply\n * @property {UpdateToggle} update_toggle\n * */\n\n/**\n * @callback Apply\n * @param {Theme} theme\n * @param {boolean} with_transition\n * @returns {void}\n * */\n\n/**\n * @callback UpdateToggle\n * @param {Theme} theme\n * @returns {void}\n * */\n","/**\n * @param {import('./service').ThemeService}  service\n * */\nexport function register_theme_toggle_event(service) {\n    const button = document.getElementById('theme-toggle');\n    if (!button) return;\n\n    button.addEventListener('click', () => {\n        service.toggle();\n    });\n}\n","export { create_codegen_service } from './codegen.js';\nexport { codegen_request_factory } from './request.js';\n","'use strict';\n\nimport {\n    ExceededMaxLengthException,\n    InvalidFormatException,\n    InvalidInputTypeException,\n    InvalidSyntaxException,\n} from './errors';\n\n/**\n *\n * @param {import(\"./commands\").CodegenCommandHandler} codegen_handler\n * @returns {CodegenService}\n * */\nexport function create_codegen_service(codegen_handler) {\n    /**\n     * @type {Execute}\n     * */\n    const execute = async (request) => {\n        try {\n            const response = await codegen_handler.send({\n                input_type: request.input_type(),\n                input: request.input(),\n                format: request.format(),\n            });\n\n            if (response.status === 'error') {\n                return [{ code: '', format: -1 }, new CodegenError(response.message)];\n            }\n\n            return [response.data, null];\n        } catch (error) {\n            const exceptions = [\n                InvalidInputTypeException,\n                InvalidFormatException,\n                ExceededMaxLengthException,\n                InvalidSyntaxException,\n            ];\n\n            if (exceptions.some((exception) => error instanceof exception)) {\n                return [{ code: '', format: -1 }, error];\n            }\n\n            return [{ code: '', format: -1 }, new CodegenError('Unhandled exception', error)];\n        }\n    };\n\n    return {\n        execute,\n    };\n}\n\n/**\n * @typedef {object} CodegenService\n * @property {Execute} execute\n * */\n\n/**\n * @callback Execute\n * @param {import(\"./request\").CodegenRequest} request\n * @returns {Promise<[import(\"./api\").CodegenResponse, Error]>}\n * @throws {CodegenError}\n * */\n\n/**\n *\n */\nclass CodegenError extends Error {\n    /**\n     *\n     * @param msg\n     * @param cause\n     */\n    constructor(msg, cause) {\n        super(msg, { cause });\n    }\n}\n","import { INPUT_TYPES, TARGET_FORMATS } from './domain';\n\n/**\n *\n */\nexport class InvalidFormatException extends Error {\n    /**\n     *\n     * @param format\n     */\n    constructor(format) {\n        const formats = Object.keys(TARGET_FORMATS).join(', ');\n        super(`Expected one of: ${formats}, received: '${format}'`);\n    }\n}\n\n/**\n *\n */\nexport class InvalidInputTypeException extends Error {\n    /**\n     *\n     * @param input_type\n     */\n    constructor(input_type) {\n        const types = Object.keys(INPUT_TYPES).join('|');\n        super(`Expected one of: ${types}, received: '${input_type}'`);\n    }\n}\n/**\n *\n */\nexport class ExceededMaxLengthException extends Error {\n    /**\n     *\n     * @param max_length\n     */\n    constructor(max_length) {\n        super(`Input value cannot exceed ${max_length}`);\n    }\n}\n\n/**\n *\n */\nexport class InvalidSyntaxException extends Error {\n    /**\n     *\n     * @param format\n     * @param cause\n     */\n    constructor(format, cause) {\n        super(`Invalid ${format} syntax`, { cause });\n    }\n}\n","/**\n * @typedef {\"json\"} InputType\n * @typedef {\"golang\" | \"jsdoc\" | \"typescript\" | \"zod\"} Format\n */\n\nexport const TARGET_FORMATS = {\n    golang: 'golang',\n    jsdoc: 'jsdoc',\n    typescript: 'typescript',\n    zod: 'zod',\n};\n\nexport const INPUT_TYPES = {\n    json: 'json',\n};\n","'use strict';\n\nimport { INPUT_TYPES, TARGET_FORMATS } from './domain';\nimport {\n    ExceededMaxLengthException,\n    InvalidFormatException,\n    InvalidInputTypeException,\n    InvalidSyntaxException,\n} from './errors';\n\nexport const codegen_request_factory = {\n    /**\n     * @param {HTMLFormElement} form\n     * @returns {CodegenRequest}\n     * */\n    create(form) {\n        const formValues = new FormData(form);\n\n        const get_input_type = () => {\n            const input_type = formValues.get('input_type').trim();\n\n            if (!Object.keys(INPUT_TYPES).includes(input_type)) {\n                throw new InvalidInputTypeException(input_type);\n            }\n\n            return input_type;\n        };\n\n        const get_input = () => {\n            const input = formValues.get('structure-input').trim();\n            if (input.length > 10_000) {\n                throw new ExceededMaxLengthException(10_000);\n            }\n\n            try {\n                JSON.parse(input);\n            } catch (error) {\n                throw new InvalidSyntaxException('json', error);\n            }\n\n            return input;\n        };\n\n        const get_format = () => {\n            const format = formValues.get('format').trim();\n            if (!Object.keys(TARGET_FORMATS).includes(format)) {\n                throw new InvalidFormatException(format);\n            }\n\n            return format;\n        };\n\n        return {\n            input_type: get_input_type,\n            input: get_input,\n            format: get_format,\n        };\n    },\n};\n\n/**\n * @typedef {object} CodegenRequest\n * @property {InputTypeGetter} input_type\n * @property {InputGetter} input\n * @property {FormatGetter} format\n * */\n\n/**\n * @callback InputTypeGetter\n * @throws {InvalidInputTypeException}\n * @returns {import(\"./domain\").InputType}\n * */\n\n/**\n * @callback InputGetter\n * @returns {string}\n * */\n\n/**\n * @callback FormatGetter\n * @throws {InvalidFormatException}\n * @returns {import(\"./domain\").Format}\n * */\n","/**\n * @param {import(\"../codegen/codegen\").CodegenService} codegen_service\n * @param {typeof import(\"../codegen/request\").codegen_request_factory} request_factory\n * @param {import(\"../notification/notification\").NotificationService} notification_service\n * @returns {CodegenDriver}\n * */\nexport function create_codegen_driver(codegen_service, request_factory, notification_service) {\n    /**\n     * @type {Start}\n     * */\n    const start = (form, button) => {\n        form.addEventListener('submit', async (event) => {\n            try {\n                event.preventDefault();\n\n                button.setAttribute('disabled', 'true');\n\n                const [data, error] = await codegen_service.execute(\n                    request_factory.create(event.target)\n                );\n                if (error) {\n                    notification_service.show_error(error.message || 'Failed to generate code');\n                    button.removeAttribute('disabled');\n                    return;\n                }\n\n                const output_container = document.getElementById('output-code');\n                output_container.innerText = data.code;\n                notification_service.show_success('Code generated successfully!');\n                button.removeAttribute('disabled');\n            } catch (error) {\n                notification_service.show_error(error.message);\n            }\n        });\n    };\n\n    return {\n        start,\n    };\n}\n\n/**\n * @typedef {object} CodegenDriver\n * @property {Start} start\n * */\n\n/**\n * @callback Start\n * @param {HTMLFormElement} form\n * @param {HTMLButtonElement} button\n * @returns { void }\n * */\n","'use strict';\n\n/**\n * @param {import('../clipboard/clipboard').ClipboardService} clipboard\n * @param {import('../notification/service').NotificationService} notifications\n * @returns {Driver}\n * */\nexport function create_clipboard_driver(clipboard, notifications) {\n    /**\n     * @type {Start}\n     * */\n    const start = (button) => {\n        button.addEventListener('click', async () => {\n            const output = document.getElementById('output-code');\n            const code = output.innerText;\n\n            clipboard.save(code);\n            notifications.show_success('Saved to clipboard!');\n        });\n    };\n\n    return {\n        start,\n    };\n}\n\n/**\n * @callback Start\n * @param {HTMLButtonElement} button\n * */\n\n/**\n * @typedef Driver\n * @property {Start} start\n * */\n","/**\n * @param {ClipboardClient} client\n * @returns {ClipboardService}\n * */\nexport function create_clipboard(client) {\n    /**\n     * @type {Save}\n     * */\n    const save = (text) => {\n        // TODO:indicate success/failure of the copy to clipboard action in the UI\n        return client.writeText(text);\n    };\n\n    return {\n        save,\n    };\n}\n\n/**\n * @typedef {object} ClipboardClient\n * @property {(string)=>Promise<void>} writeText\n * */\n\n/**\n * @callback Save\n * @param {string} text\n * @returns {Promise<void>}\n * */\n\n/**\n * @typedef ClipboardService\n * @property {Save} save\n * */\n","export { create_notification_service } from './service.js';\nexport { create_notification_container } from './container.js';\n","'use strict';\n\nimport { notification_builder } from './notification';\n\n/**\n * @param {import(\"./container\").NotificationContainer} notification_container\n * @returns {NotificationService}\n */\nexport function create_notification_service(notification_container) {\n    /** @type {NotificationService[\"show_success\"]} */\n    const show_success = (message) => {\n        const builder = notification_builder();\n        const [notification, error] = builder.with_type('success').with_message(message).build();\n\n        if (error) {\n            show_error(`Error creating notification: ${error.message}`);\n            return;\n        }\n\n        notification_container.add(notification);\n\n        setTimeout(() => {\n            notification_container.remove(notification);\n        }, 10_000);\n    };\n\n    /** @type {NotificationService[\"show_error\"]} */\n    const show_error = (message) => {\n        const builder = notification_builder();\n        const [notification, error] = builder.with_type('error').with_message(message).build();\n\n        if (error) {\n            show_error(`Error creating notification: ${error.message}`);\n            return;\n        }\n\n        notification_container.add(notification);\n\n        setTimeout(() => {\n            notification_container.remove(notification);\n        }, 10_000);\n    };\n\n    return {\n        show_success,\n        show_error,\n        dismiss_all: notification_container.clear,\n    };\n}\n\n/**\n * @typedef {object} NotificationService\n * @property {(msg: string)=>void} show_success\n * @property {(msg: string)=>void} show_error\n * @property {()=>void} dismiss_all\n */\n","'use strict';\n\n/**\n * @returns {NotificationBuilder}\n * */\nexport function notification_builder() {\n    const config = {\n        type: '',\n        msg: '',\n    };\n\n    return {\n        with_type(type) {\n            config.type = type;\n\n            return this;\n        },\n        with_message(msg) {\n            config.msg = msg;\n\n            return this;\n        },\n        build() {\n            if (config.type !== 'error' && config.type !== 'success') {\n                return [\n                    null_notification,\n                    new Error(`Expected type to be \"success\" or \"error\", received: ${config.type}`),\n                ];\n            }\n\n            if (config.msg === '') {\n                return [null_notification, new Error(`Notification cannot have an empty message`)];\n            }\n\n            return [create_notification(config), null];\n        },\n    };\n}\n\n/**\n * @param {{msg: string; type: string}} config\n * */\nfunction create_notification(config) {\n    let is_active = true;\n    const toast = document.createElement('div');\n    toast.className = `toast toast--${config.type}`;\n    toast.setAttribute('role', 'alert');\n\n    const icon = config.type === 'success' ? create_success_icon() : create_error_icon();\n\n    toast.innerHTML = `\n            ${icon}\n            <span class=\"toast__message\">${config.msg}</span>\n            <button class=\"toast__close\" aria-label=\"Close notification\">\n                ${create_close_icon()}\n            </button>\n        `;\n\n    const close_button = toast.querySelector('.toast__close');\n\n    const handle_close = () => {\n        if (!is_active) {\n            console.warn(\"Notification is already closed!: '%s'\", config.msg);\n            return;\n        }\n        toast.classList.remove('toast--visible');\n        toast.classList.add('toast--removing');\n        toast.addEventListener(\n            'animationend',\n            () => {\n                toast.remove();\n                is_active = false;\n            },\n            { once: true }\n        );\n    };\n\n    if (close_button) {\n        close_button.addEventListener('click', () => {\n            close_button.setAttribute('disabled', 'true');\n            handle_close();\n        });\n    }\n\n    return {\n        html() {\n            return toast;\n        },\n        value() {\n            return toast.innerHTML;\n        },\n        active() {\n            return is_active;\n        },\n        close: handle_close,\n    };\n}\n\n/**\n * @returns {string}\n */\nconst create_success_icon = () => `\n        <svg class=\"toast__icon\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" aria-hidden=\"true\">\n            <path d=\"M22 11.08V12a10 10 0 1 1-5.93-9.14\"></path>\n            <polyline points=\"22 4 12 14.01 9 11.01\"></polyline>\n        </svg>\n    `;\n\n/**\n * @returns {string}\n */\nconst create_error_icon = () => `\n        <svg class=\"toast__icon\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" aria-hidden=\"true\">\n            <circle cx=\"12\" cy=\"12\" r=\"10\"></circle>\n            <line x1=\"15\" y1=\"9\" x2=\"9\" y2=\"15\"></line>\n            <line x1=\"9\" y1=\"9\" x2=\"15\" y2=\"15\"></line>\n        </svg>\n    `;\n\n/**\n * @returns {string}\n */\nconst create_close_icon = () => `\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" aria-hidden=\"true\">\n            <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\"></line>\n            <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\"></line>\n        </svg>\n    `;\n\n/**\n * @type {Notification}\n * */\nconst null_notification = {\n    html: () => document.createElement('div'),\n    value: () => '',\n    is_active: () => false,\n    close() {},\n};\n\n/**\n * @typedef {object} Notification\n * @property {()=>HTMLElement} html\n * @property {()=>string} value\n * @property {()=>boolean} active\n * @property {()=>void} close\n * */\n\n/**\n * @typedef {object} NotificationBuilder\n * @property {(type: \"error\" | \"success\")=>NotificationBuilder} with_type\n * @property {(msg: string)=>NotificationBuilder} with_message\n * @property {()=>[ Notification, Error ]} build\n * */\n","'use strict';\nconst CONTAINER_ID = 'notification-container';\n\n/**\n * @returns {NotificationContainer}\n * */\nexport function create_notification_container() {\n    const container = get_container(CONTAINER_ID);\n    /**\n     * @type {Set<import(\"./notification\").Notification>}\n     * */\n    const notifications = new Set();\n\n    // TODO: Display a \"clear\" button when 3 or more notifications are in the container\n\n    return Object.freeze({\n        add(notification) {\n            const toast = notification.html();\n            container.appendChild(toast);\n\n            // Trigger reflow to ensure animation plays\n            void toast.offsetHeight;\n\n            toast.classList.add('toast--visible');\n            notifications.add(notification);\n        },\n        remove(notification) {\n            if (notifications.has(notification)) {\n                notification.close();\n                notifications.delete(notification);\n            }\n        },\n        clear() {\n            for (const notification of notifications) {\n                notification.close();\n                notifications.delete(notification);\n            }\n        },\n    });\n}\n\n/**\n * @param id\n * @returns {HTMLElement}\n */\nconst get_container = (id) => {\n    let container = document.getElementById(id);\n    if (!container) {\n        container = document.createElement('div');\n        container.id = CONTAINER_ID;\n        container.className = 'toast-container';\n        container.setAttribute('aria-live', 'polite');\n        container.setAttribute('aria-atomic', 'false');\n        document.body.appendChild(container);\n    }\n\n    return container;\n};\n\n/**\n * @typedef {object} NotificationContainer\n * @property {(notification: import(\"./notification\").Notification)=>void} add\n * @property {(notification: import(\"./notification\").Notification)=>void} remove\n * @property {()=>void} clear\n * */\n","'use strict';\n\n/**\n * @returns {RpcClient}\n * */\nexport function create_rpc_client() {\n    const worker = new Worker(new URL('./worker.js', import.meta.url), {\n        type: 'module',\n    });\n\n    const pending_requests = new Map();\n\n    worker.addEventListener('message', (event) => {\n        const response = JSON.parse(event.data);\n        const entry = pending_requests.get(response.id);\n\n        if (!entry) return;\n\n        if (response.error) {\n            entry.reject(response.error);\n        } else {\n            entry.resolve(response);\n        }\n    });\n\n    worker.addEventListener('error', (error) => {\n        for (const { reject } of pending_requests.values()) {\n            reject(error);\n        }\n\n        pending_requests.clear();\n    });\n\n    return {\n        async send(request, timeout_ms = 5_000) {\n            return new Promise((resolve, reject) => {\n                if (pending_requests.has(request.id)) {\n                    throw new Error(`Duplicate request id ${request.id}`);\n                }\n\n                const timer_id = setTimeout(() => {\n                    pending_requests.delete(request.id);\n                    reject(new Error('RPC timeout'));\n                }, timeout_ms);\n\n                pending_requests.set(request.id, {\n                    resolve: (value) => {\n                        clearTimeout(timer_id);\n                        pending_requests.delete(request.id);\n                        resolve(value);\n                    },\n                    reject: (error) => {\n                        clearTimeout(timer_id);\n                        pending_requests.delete(request.id);\n                        reject(error);\n                    },\n                });\n                worker.postMessage(request);\n            });\n        },\n        close() {\n            for (const { reject } of pending_requests.values()) {\n                reject(new Error('Worker terminated.'));\n            }\n\n            pending_requests.clear();\n            worker.terminate();\n        },\n    };\n}\n\n/**\n * @typedef {object} RpcClient\n * @property {SendRPCCommand} send\n * @property {()=>void} close\n * */\n\n/**\n * @callback SendRPCCommand\n * @param {import(\"../libs/jsonrpc\").JSONRPCRequest<unknown>} request\n * @returns {Promise<import(\"../libs/jsonrpc\").JSONRPCResponse<unknown>>}\n * */\n","module.exports = parcelRequire.resolve(\"worker.41b28b9f.js\");","'use strict';\n\nimport { create_json_rpc_request } from '../libs/jsonrpc';\nimport { parse_codegen_response } from './commands';\n\n/**\n * @param {import(\"../rpc/client\").RpcClient} client\n * @returns {import(\"./commands\").CodegenCommandHandler}\n * */\nexport function create_rpc_codegen_command_handler(client) {\n    return {\n        /**\n         *\n         * @param command\n         */\n        async send(command) {\n            try {\n                const request = create_json_rpc_request('codegen', command);\n                const response = await client.send(request);\n                return { status: 'ok', data: parse_codegen_response(response) };\n            } catch (error) {\n                return {\n                    status: 'error',\n                    err: new Error('Error while making request', { cause: error }),\n                };\n            }\n        },\n    };\n}\n","'use strict';\n\nlet id = 1;\n\n/**\n * @template T\n * @param {string} method\n * @param {T} body\n * @returns {JSONRPCRequest<T>}\n * */\nexport function create_json_rpc_request(method, body) {\n    return {\n        method,\n        jsonrpc: '2.0',\n        params: body,\n        id: id++,\n    };\n}\n\n/**\n *\n * @param response\n */\nexport function validate_json_rpc_response(response) {\n    if (!('jsonrpc' in response)) {\n        throw new Error('Missing required param \"jsonrpc\"');\n    }\n\n    if (typeof response.jsonrpc !== 'string') {\n        throw new Error(\n            `Invalid jsonrpc type. Expected string, received ${typeof response.jsonrpc}`\n        );\n    }\n\n    if (response.jsonrpc !== '2.0') {\n        throw new Error(`Invalid rpc version. Expected 2.0, received ${response.jsonrpc}`);\n    }\n\n    if (typeof response.id !== 'number') {\n        throw new Error(`Invalid id type. Expected number, received ${typeof response.jsonrpc}`);\n    }\n\n    if (response.error) {\n        if (typeof response.error.code !== 'number') {\n            throw new Error(\n                `Invalid error code type. Expected number, received ${typeof response.jsonrpc}`\n            );\n        }\n    }\n}\n\n/**\n * @template T\n * @typedef {object} JSONRPCRequest\n * @property {\"2.0\"} jsonrpc\n * @property {string} method\n * @property {T} params\n * @property {number} id\n * */\n\n/**\n * @template T\n * @typedef {object} JSONRPCResponse\n * @property {\"2.0\"} jsonrpc\n * @property {T}  [result]\n * @property {number} [id]\n * @property {JSONRPCError} [error]\n * */\n\n/**\n * @typedef {object} JSONRPCError\n * @property {number} code\n * @property {string} [message]\n * @property {object} [data]\n * */\n","'use strict';\n\nimport { validate_json_rpc_response } from '../libs/jsonrpc';\n\n/**\n * @typedef {object} CodegenResponse\n * @property {string} code\n * @property {number} format\n * */\n\n/**\n * @typedef {object} CodegenRequest\n * @property {import(\"../codegen/domain\").InputType} input_type\n * @property {string} input\n * @property {import(\"../codegen/domain\").Format} format\n * */\n\n/**\n * @typedef {object} CodegenCommandHandler\n * @property {(request: CodegenRequest)=>Promise<HandlerResponse>} send\n * */\n\n/**\n * @typedef {SuccessResponse |ErrorResponse} HandlerResponse\n * */\n\n/**\n * @typedef {object} SuccessResponse\n * @property {\"ok\"} status\n * @property {CodegenResponse } data\n * */\n\n/**\n * @typedef {object} ErrorResponse\n * @property {\"error\"} status\n * @property {Error } err\n * */\n\n/**\n * @typedef {import(\"../libs/jsonrpc\").JSONRPCRequest<CodegenRequest>} CodegenJSONRPCRequest\n * */\n\n/**\n * @param {object} response\n * @returns {CodegenResponse}\n * */\nexport function parse_codegen_response(response) {\n    validate_json_rpc_response(response);\n    return {\n        code: response.result.code,\n        format: response.result.format,\n    };\n}\n"],"names":["url","$parcel$global","globalThis","$parcel$modules","$parcel$inits","parcelRequire","id","exports","init","module","call","err","Error","code","register","$276a0e9908831999$export$ce0e5beb5efeb79","Object","freeze","LIGHT","DARK","$276a0e9908831999$export$c412900fa5efae76","theme","$ce8b88ffb7627d74$export$c25a46012a4319a1","$dd3b75789f9c576d$export$83b3338595758b4b","golang","jsdoc","typescript","zod","$dd3b75789f9c576d$export$d1576927a1219cd4","json","$c9fb62759d2ea27d$export$827b38dced4a2f9c","format","keys","join","$c9fb62759d2ea27d$export$a999c3277f94f674","input_type","$c9fb62759d2ea27d$export$e5ac93839bcdef4d","max_length","$c9fb62759d2ea27d$export$88a13612578a6410","cause","$6b47dc4a14c725d2$var$CodegenError","msg","$1d9514c02e30a142$export$c2a8ada50e3bcc2a","create","form","formValues","FormData","get","trim","includes","input","length","JSON","parse","error","$1129469dddf70daf$export$d191076365900f13","config","type","with_type","with_message","build","is_active","toast","icon","close_button","handle_close","$1129469dddf70daf$var$null_notification","document","createElement","className","setAttribute","$1129469dddf70daf$var$create_success_icon","$1129469dddf70daf$var$create_error_icon","innerHTML","$1129469dddf70daf$var$create_close_icon","querySelector","classList","remove","add","addEventListener","once","console","warn","html","value","active","close","$72c6dc9f38f618f7$var$CONTAINER_ID","$be55ea0812813c86$exports","i","resolve","$parcel$distDir","$38b6621d7d721506$var$id","storage_key","storage","system","ui","notification_container","client","codegen_handler","codegen_service","clipboard","container","media","root","current_theme","notifications","show_error","worker","pending_requests","button","theme_driver","load","localStorage","getItem","save","setItem","window","matchMedia","current","matches","on_change","handler","event","documentElement","apply","with_transition","setTimeout","update_toggle","getElementById","next","String","start","toggle","notification_service","body","appendChild","Set","notification","offsetHeight","has","delete","clear","show_success","message","builder","dismiss_all","codegen_driver","Worker","URL","Map","response","data","entry","reject","values","send","request","timeout_ms","Promise","timer_id","set","clearTimeout","postMessage","terminate","command","method","jsonrpc","params","status","result","execute","exceptions","some","exception","preventDefault","request_factory","target","removeAttribute","output_container","innerText","clipboard_driver","navigator","text","writeText","output","service"],"version":3,"file":"web.901e9d76.js.map","sourceRoot":"../../client/web/"}